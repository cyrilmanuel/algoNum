<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>AN_Labo4_Equipe3</title>
</head>
<body>
    <h1>Labortaoire 4</h1>
    <h2> Calcul et visualisation du cosinus et de ses 2 premières dérivées</h2>
    <p><canvas id="Canvas" width="800" height="600">Votre navigateur ne supporte pas les Canvas. Veuillez utiliser un navigateur plus récent.</canvas></p>
    <p>Les boutons ci-dessous permette l'affichage des différentes courbes:</p>
    <p>
        <button type="Button" name="f(x)" id="f(x)">f(x): Fonction cosinus</button>
        <button type="Button" name="f'(x)" id="f'(x)">f'(x): Dérivé première du cosinus</button>
        <button type="Button" name="f''(x)" id="f''(x)">f''(x): Dérivé seconde du cosinus</button>
    </p>

</body>

<script type="text/javascript">
    var c = document.getElementById("Canvas");
    var context = c.getContext("2d");

    //nombre de pixel par unité
    var sc = c.width/20;
    drawGraph(c, context);
    drawQuadrille(c, context);
    drawCosinus(c, context);

    //Dessine les axes et les graduations
    function drawGraph(canvas, context){

        //Dessin des axes
        context.strokeStyle = "red";
        context.moveTo(0, c.height/2 + canvas.height/30);
        context.lineTo(canvas.width, canvas.height/2 + canvas.height/30);
        context.moveTo(canvas.width/2, 0);
        context.lineTo(canvas.width/2, canvas.height);

        //Dessin des graduations sur l'axe X
        context.moveTo(0,canvas.height/2 + canvas.height/30 + 5);
        var x = 0;
        while(x != canvas.width)
        {
            context.lineTo(x, canvas.height/2 + canvas.height/30 - 5);
            x += sc;
            context.moveTo(x, canvas.height/2 + canvas.height/30 + 5)
        }

        //Dessin des graduations sur l'axe Y
        context.moveTo(canvas.width/2 -5, 0);
        var y = 0;
        while(y != canvas.height)
        {
            context.lineTo(canvas.width/2 + 5, y);
            y += sc;
            context.moveTo(canvas.width/2 -5, y);
        }
        context.stroke();
    }
    //Dessine le quadrillage
    function drawQuadrille(canvas, context){
        context.strokeStyle = "#777";
        //context.beginPath();
        context.lineWidth = 0.5;

        //Ligne horizontales
        for(var i=0; i<=canvas.height/sc; i++){
            context.moveTo(0, canvas.height - sc *i);
            context.lineTo(canvas.width, canvas.height-sc*i);
        }
        //Ligne verticales
        for(var i=0; i<= canvas.width/sc; i++){
            context.moveTo(sc*i, canvas.height-0);
            context.lineTo(sc*i, canvas.height-canvas.height);
        }
        context.closePath();
        context.stroke();
    }

    function drawCosinus(canvas, context){
        context.strokeStyle = "blue";
        context.lineWidth = 1.5;
        context.beginPath();
        context.moveTo(0,0);
        x = 0;
        context.moveTo(0, canvas.height/2 + canvas.height/30);
        while(x <= canvas.)
        context.lineTo(x,canvas.height/2 + canvas.height/30 - cosTaylor(x)*sc);
        context.closePath();
        context.stroke();
    }

    function cosTaylor(n){
        var reponse = 0;
        for(var i = 0; i <=n; i++){
            reponse += 1-(Math.pow(-1,2)/factorielle(2*i))*Math.pow(n, 2*i);
        }
        return reponse;
    }

    //Fonction factorielle pour le calcul du taylor de cosinus et des ses derivées
    function factorielle(n){
        return n>1 ? n*factorielle(n-1) : 1;
    }
</script>
</html>